This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2025-11-19 19:53:36

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
server.py
catalog
  tests.py
  apps.py
  models.py
  forms.py
  views.py
  urls.py
  migrations
    0002_contactinfo.py
    0001_initial.py
    __init__.py
  fixtures
    data.json
    data1.json
  templates
    catalog
      product_detail.html
      base.html
      category.html
      contacts.html
      includes
        menu.html
      home.html
      product_form.html
  __init__.py
  admin.py
  management
    commands
      __init__.py
      fill_data.py
    __init__.py
myshop
  wsgi.py
  urls.py
  __init__.py
  asgi.py
README.md
django_templates_set.html
requirements.txt
manage.py
.gitignore
```

# Repository Files


## server.py

```python
import http.server
import socketserver
from urllib.parse import parse_qs

# Определяем порт, на котором будет работать сервер
PORT = 8000

# 1. СЛОВАРЬ МАРШРУТОВ (ОБНОВЛЕН)
# Сопоставляет URL-пути с именами файлов
ROUTES = {
    '/': 'index.html',              # Главная страница
    '/index': 'index.html',
    '/category': 'category.html',   # Страница категорий
    '/catalog': 'catalog.html',     # Страница каталога
    '/contacts': 'contacts.html',   # Страница контактов
    '/orders': 'orders.html',       # <<< ДОБАВЛЕН НОВЫЙ МАРШРУТ
}

class MyHandler(http.server.SimpleHTTPRequestHandler):

    def do_GET(self):
        """
        Обработчик GET-запросов с маршрутизацией.
        Теперь отдает разные HTML-файлы в зависимости от URL.
        """
        request_path = self.path
        print(f"Получен GET-запрос для: {request_path}")

        # 2. ОПРЕДЕЛЕНИЕ ИМЕНИ ФАЙЛА
        # Проверяем, есть ли запрошенный путь в нашем словаре маршрутов
        if request_path in ROUTES:
            file_to_serve = ROUTES[request_path]
        elif request_path.endswith('.html') and request_path[1:] in ROUTES.values():
            # Это позволяет также открывать файлы напрямую (например, /index.html)
            file_to_serve = request_path[1:]
        else:
            # Если маршрут не найден, отправляем 404
            self.send_error(404, "Страница не найдена")
            return

        try:
            # 3. ОТПРАВКА ФАЙЛА
            # Пытаемся открыть и прочитать соответствующий HTML-файл
            with open(file_to_serve, 'rb') as file:
                content = file.read()

            # Отправляем код ответа 200 (ОК)
            self.send_response(200)
            # Отправляем заголовок Content-type, указывая, что это HTML
            self.send_header('Content-type', 'text/html; charset=utf-8')
            self.end_headers()

            # Отправляем содержимое файла в теле ответа
            self.wfile.write(content)

        except FileNotFoundError:
            # Если файл из словаря не найден на диске
            print(f"Ошибка: Файл {file_to_serve} не найден на диске.")
            self.send_error(404, f"Файл {file_to_serve} не найден")
        except Exception as e:
            # Обработка других возможных ошибок
            print(f"Произошла ошибка: {e}")
            self.send_error(500, "Внутренняя ошибка сервера")

    def do_POST(self):
        """
        Обработчик POST-запросов остается без изменений.
        Он по-прежнему печатает данные в консоль.
        """
        print(f"\nПолучен POST-запрос для: {self.path}")

        try:
            # Получаем длину содержимого
            content_length = int(self.headers['Content-Length'])

            # Читаем тело запроса
            post_data_bytes = self.rfile.read(content_length)
            post_data_str = post_data_bytes.decode('utf-8')

            # --- Печать данных в консоль ---
            print("--- НАЧАЛО ДАННЫХ POST-ЗАПРОСА ---")
            print(f"Сырые данные (raw): {post_data_str}")

            parsed_data = parse_qs(post_data_str)
            print("Разобранные данные (parsed):")
            for key, value in parsed_data.items():
                print(f"  {key}: {value[0]}")
            print("--- КОНЕЦ ДАННЫХ POST-ЗАПРОСА ---\n")

            # --- Отправляем ответ клиенту ---
            self.send_response(200)
            self.send_header('Content-type', 'text/html; charset=utf-8')
            self.end_headers()

            response_message = f"""
            <html>
                <head><title>Спасибо!</title></head>
                <body>
                    <h1>Данные получены!</h1>
                    <p>Сообщение успешно отправлено. Проверьте консоль PyCharm.</p>
                    <p><a href="/">Вернуться на главную</a></p>
                </body>
            </html>
            """
            self.wfile.write(response_message.encode('utf-8'))

        except Exception as e:
            print(f"Ошибка при обработке POST-запроса: {e}")
            self.send_error(500, "Ошибка обработки POST-запроса")


# --- Запуск сервера ---
if __name__ == "__main__":
    with socketserver.TCPServer(("", PORT), MyHandler) as httpd:
        print(f"Сервер запущен и слушает порт {PORT}")
        print(f"Главная: http://localhost:{PORT}/")
        print(f"Контакты: http://localhost:{PORT}/contacts")
        httpd.serve_forever()
```

## catalog/tests.py

```python
from django.test import TestCase

# Create your tests here.
```

## catalog/apps.py

```python
from django.apps import AppConfig


class CatalogConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'catalog'
```

## catalog/models.py

```python
from django.db import models

NULLABLE = {'blank': True, 'null': True}


class Category(models.Model):
    name = models.CharField(max_length=100, verbose_name='Наименование')
    description = models.TextField(verbose_name='Описание', **NULLABLE)

    def __str__(self):
        return self.name

    class Meta:
        verbose_name = 'Категория'
        verbose_name_plural = 'Категории'


class Product(models.Model):
    name = models.CharField(max_length=255, verbose_name='Наименование')
    description = models.TextField(verbose_name='Описание', **NULLABLE)
    image = models.ImageField(upload_to='products/', verbose_name='Изображение', **NULLABLE)
    category = models.ForeignKey(Category, on_delete=models.CASCADE, verbose_name='Категория')
    price = models.DecimalField(max_digits=10, decimal_places=2, verbose_name='Цена за покупку')
    created_at = models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')
    updated_at = models.DateTimeField(auto_now=True, verbose_name='Дата последнего изменения')

    def __str__(self):
        return f'{self.name} ({self.category.name})'

    class Meta:
        verbose_name = 'Продукт'
        verbose_name_plural = 'Продукты'
        ordering = ('name',)  # Для сортировки по умолчанию


class ContactInfo(models.Model):
    address = models.CharField(max_length=255, verbose_name='Адрес')
    phone = models.CharField(max_length=20, verbose_name='Телефон')
    email = models.EmailField(verbose_name='Email')

    def __str__(self):
        return self.address

    class Meta:
        verbose_name = 'Контактная информация'
        verbose_name_plural = 'Контактная информация'
```

## catalog/forms.py

```python
from django import forms
from catalog.models import Product

class ProductForm(forms.ModelForm):
    class Meta:
        model = Product
        fields = ['name', 'description', 'image', 'category', 'price']
```

## catalog/views.py

```python
from catalog.forms import ProductForm
from catalog.models import Product, Category, ContactInfo
from django.shortcuts import render, get_object_or_404, redirect
from django.core.paginator import Paginator



def home(request):
    product_list = Product.objects.all()
    paginator = Paginator(product_list, 6)  # 6 товаров на страницу

    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'catalog/home.html', {
        'page_obj': page_obj,
        'title': 'Главная страница',
    })



def contacts(request):
    """Контроллер страницы контактов с обработкой POST-формы."""

    # Получаем контактную информацию (берем первую запись)
    contact_data = ContactInfo.objects.first()

    context = {
        'contact_data': contact_data,
        'title': 'Контакты'
    }

    if request.method == "POST":
        name = request.POST.get('user_name')
        email = request.POST.get('user_email')
        message = request.POST.get('user_message')

        # Обновленная логика вывода в консоль
        print(f"--- Сообщение с контактов ---")
        print(f"Имя: {name}, Email: {email}")
        print(f"Сообщение: {message}")
        print("----------------------------")

        context.update({
            'success': True,
            'name': name,
        })
        # Остаемся на странице контактов, передавая информацию об успехе
        return render(request, 'catalog/contacts.html', context)

    # Для GET-запроса возвращаем страницу с контактными данными
    return render(request, 'catalog/contacts.html', context)


def category(request):
    """Контроллер страницы категорий"""
    return render(request, 'catalog/category.html')


def orders(request):
    """Контроллер страницы заказов"""
    return render(request, 'catalog/orders.html')


def product_detail(request, pk):
    product = get_object_or_404(Product, pk=pk)
    return render(request, 'catalog/product_detail.html', {
        'product': product,
        'title': product.name
    })

def product_create(request):
    if request.method == 'POST':
        form = ProductForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return redirect('home')
    else:
        form = ProductForm()
    return render(request, 'catalog/product_form.html', {'form': form})
```

## catalog/urls.py

```python
from django.urls import path
from catalog import views

urlpatterns = [
    path('', views.home, name='home'),
    path('contacts/', views.contacts, name='contacts'),
    path('category/', views.category, name='category'),  # ✅ добавили
    path('orders/', views.orders, name='orders'),        # ✅ добавили
    path('product/<int:pk>/', views.product_detail, name='product_detail'),
    path('product/create/', views.product_create, name='product_create'),

]
```

## catalog/migrations/0002_contactinfo.py

```python
# Generated by Django 5.2.8 on 2025-11-14 11:05

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('catalog', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ContactInfo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('address', models.CharField(max_length=255, verbose_name='Адрес')),
                ('phone', models.CharField(max_length=20, verbose_name='Телефон')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
            ],
            options={
                'verbose_name': 'Контактная информация',
                'verbose_name_plural': 'Контактная информация',
            },
        ),
    ]
```

## catalog/migrations/0001_initial.py

```python
# Generated by Django 5.2.8 on 2025-11-14 10:32

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Наименование')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Описание')),
            ],
            options={
                'verbose_name': 'Категория',
                'verbose_name_plural': 'Категории',
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Наименование')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Описание')),
                ('image', models.ImageField(blank=True, null=True, upload_to='products/', verbose_name='Изображение')),
                ('price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Цена за покупку')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Дата последнего изменения')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='catalog.category', verbose_name='Категория')),
            ],
            options={
                'verbose_name': 'Продукт',
                'verbose_name_plural': 'Продукты',
                'ordering': ('name',),
            },
        ),
    ]
```

## catalog/migrations/__init__.py

```python

```

## catalog/fixtures/data.json

```json
[
{
  "model": "catalog.category",
  "pk": 1,
  "fields": {
    "name": "Фрукты",
    "description": "Свежие фрукты"
  }
},
{
  "model": "catalog.category",
  "pk": 2,
  "fields": {
    "name": "Овощи",
    "description": "Свежие овощи"
  }
},
{
  "model": "catalog.category",
  "pk": 3,
  "fields": {
    "name": "Молочные продукты",
    "description": "Из цельного молока"
  }
},
{
  "model": "catalog.category",
  "pk": 4,
  "fields": {
    "name": "Фрукты",
    "description": "Свежие фрукты"
  }
},
{
  "model": "catalog.category",
  "pk": 5,
  "fields": {
    "name": "Овощи",
    "description": "Свежие овощи"
  }
},
{
  "model": "catalog.category",
  "pk": 6,
  "fields": {
    "name": "Яблоко \\\"Голден\\\"",
    "description": "Сочное"
  }
},
{
  "model": "catalog.product",
  "pk": 1,
  "fields": {
    "name": "Яблоко \"Голден\"",
    "description": "Сочное",
    "image": "",
    "category": 1,
    "price": "160.00",
    "created_at": "2025-11-14T10:38:02.329Z",
    "updated_at": "2025-11-14T10:41:31.900Z"
  }
},
{
  "model": "catalog.product",
  "pk": 2,
  "fields": {
    "name": "Картофель \"Молодой\"",
    "description": "Рассыпчатый",
    "image": "",
    "category": 2,
    "price": "80.00",
    "created_at": "2025-11-14T10:38:02.334Z",
    "updated_at": "2025-11-14T10:38:02.334Z"
  }
},
{
  "model": "catalog.product",
  "pk": 3,
  "fields": {
    "name": "Молоко \"Фермерское\"",
    "description": "3.2%",
    "image": "",
    "category": 3,
    "price": "120.00",
    "created_at": "2025-11-14T10:38:02.336Z",
    "updated_at": "2025-11-14T10:38:02.336Z"
  }
}
]
```

## catalog/fixtures/data1.json

```json
[
{
  "model": "catalog.category",
  "pk": 1,
  "fields": {
    "name": "Фрукты",
    "description": "Свежие фрукты"
  }
},
{
  "model": "catalog.category",
  "pk": 2,
  "fields": {
    "name": "Овощи",
    "description": "Свежие овощи"
  }
},
{
  "model": "catalog.category",
  "pk": 3,
  "fields": {
    "name": "Молочные продукты",
    "description": "Из цельного молока"
  }
},
{
  "model": "catalog.category",
  "pk": 4,
  "fields": {
    "name": "Фрукты",
    "description": "Свежие фрукты"
  }
},
{
  "model": "catalog.category",
  "pk": 5,
  "fields": {
    "name": "Овощи",
    "description": "Свежие овощи"
  }
},
{
  "model": "catalog.category",
  "pk": 6,
  "fields": {
    "name": "Яблоко \\\"Голден\\\"",
    "description": "Сочное"
  }
},
{
  "model": "catalog.category",
  "pk": 7,
  "fields": {
    "name": "Воды",
    "description": "Вода очищенная питьевая"
  }
},
{
  "model": "catalog.product",
  "pk": 1,
  "fields": {
    "name": "Яблоко \"Голден\"",
    "description": "Сочное",
    "image": "",
    "category": 1,
    "price": "160.00",
    "created_at": "2025-11-14T10:38:02.329Z",
    "updated_at": "2025-11-14T10:41:31.900Z"
  }
},
{
  "model": "catalog.product",
  "pk": 2,
  "fields": {
    "name": "Картофель \"Молодой\"",
    "description": "Рассыпчатый",
    "image": "",
    "category": 2,
    "price": "80.00",
    "created_at": "2025-11-14T10:38:02.334Z",
    "updated_at": "2025-11-14T10:38:02.334Z"
  }
},
{
  "model": "catalog.product",
  "pk": 3,
  "fields": {
    "name": "Молоко \"Фермерское\"",
    "description": "3.2%",
    "image": "",
    "category": 3,
    "price": "120.00",
    "created_at": "2025-11-14T10:38:02.336Z",
    "updated_at": "2025-11-14T10:38:02.336Z"
  }
},
{
  "model": "catalog.product",
  "pk": 4,
  "fields": {
    "name": "Вода питьевая",
    "description": "Горный ручей",
    "image": "",
    "category": 7,
    "price": "100.00",
    "created_at": "2025-11-14T11:17:22.545Z",
    "updated_at": "2025-11-14T11:17:22.545Z"
  }
},
{
  "model": "catalog.contactinfo",
  "pk": 1,
  "fields": {
    "address": "Оловянная",
    "phone": "+79145083800",
    "email": "ndreyst@olovyannaya.ru"
  }
}
]
```

## catalog/templates/catalog/product_detail.html

```html
{% extends 'catalog/base.html' %}


{% block title %}{{ product.name }}{% endblock %}


{% block content %}
<div class="card mb-4 shadow-sm">
    <div class="row g-0">
        <div class="col-md-4">
            <img src="{{ product.image }}" class="img-fluid rounded-start" alt="{{ product.name }}">
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <h2 class="card-title">{{ product.name }}</h2>
                <p class="text-muted">Категория: {{ product.category }}</p>
                <h4 class="text-success mb-3">Цена: {{ product.price }} ₽</h4>
                <p class="card-text">{{ product.description }}</p>
                <a href="{% url 'home' %}" class="btn btn-secondary mt-3">Назад</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```

## catalog/templates/catalog/base.html

```html
{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MyShop{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

{% include 'catalog/includes/menu.html' %}


<div class="container mt-4 mb-5">
    {% block content %}{% endblock %}
</div>


<footer class="bg-light text-center py-3 mt-4">
    <p class="mb-0">© 2025 MyShop</p>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

## catalog/templates/catalog/category.html

```html
{% extends 'catalog/base.html' %}


{% block title %}Категории{% endblock %}


{% block content %}
<h2 class="mb-4">Категории товаров</h2>
<div class="list-group">
    {% for category in categories %}
        <a class="list-group-item list-group-item-action" href="?category={{ category.pk }}">
            {{ category.name }}
        </a>
    {% endfor %}
</div>


{% if products %}
<h3 class="mt-4">Товары категории</h3>
<div class="row g-4 mt-2">
    {% for product in products %}
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <img src="{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
            <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                <p class="card-text">{{ product.description|truncatechars:100 }}</p>
                <p class="text-success fw-bold">{{ product.price }} ₽</p>
                <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">Подробнее</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
```

## catalog/templates/catalog/contacts.html

```html
{% extends 'catalog/base.html' %}


{% block title %}Контакты{% endblock %}


{% block content %}
<h2 class="mb-4">Контакты</h2>
<div class="card shadow-sm p-4">
    <p><strong>Email:</strong> andreyst@olovyannaya.ru</p>
    <p><strong>Телефон:</strong> +7 (914) 508-38-00</p>
    <p><strong>Адрес:</strong> п. Оловянная, ул. Лазо, 31</p>
</div>
{% endblock %}
```

## catalog/templates/catalog/includes/menu.html

```html
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}">MyShop</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">Главная</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'category' %}">Категории</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'contacts' %}">Контакты</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
```

## catalog/templates/catalog/home.html

```html
{% extends 'catalog/base.html' %}


{% block title %}Главная{% endblock %}


{% block content %}
<h2 class="mb-4">Все товары</h2>
<div class="row g-4">
    {% for product in page_obj %}
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <img src="{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
            <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                <p class="card-text">{{ product.description|truncatechars:100 }}</p>
                <p class="text-success fw-bold">{{ product.price }} ₽</p>
                <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">Подробнее</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>


<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Назад</a></li>
        {% endif %}


        <li class="page-item active"><span class="page-link">{{ page_obj.number }}</span></li>


        {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Вперёд</a></li>
        {% endif %}
    </ul>
</nav>
{% endblock %}
```

## catalog/templates/catalog/product_form.html

```html
{% extends 'catalog/base.html' %}


{% block title %}Создание товара{% endblock %}


{% block content %}
<h2 class="mb-4">Добавить новый товар</h2>
<form method="post" enctype="multipart/form-data" class="border p-4 rounded shadow-sm bg-light">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Создать</button>
    <a href="{% url 'home' %}" class="btn btn-secondary">Отменить</a>
</form>
{% endblock %}
```

## catalog/__init__.py

```python

```

## catalog/admin.py

```python
from django.contrib import admin
from .models import Category, Product
from .models import Category, Product, ContactInfo


@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = ('id', 'name')


@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ('id', 'name', 'price', 'category')
    list_filter = ('category',)
    search_fields = ('name', 'description')


@admin.register(ContactInfo) # 2. Регистрация
class ContactInfoAdmin(admin.ModelAdmin):
    list_display = ('address', 'phone', 'email')
```

## catalog/management/commands/__init__.py

```python

```

## catalog/management/commands/fill_data.py

```python
from django.core.management import BaseCommand, call_command
from catalog.models import Product, Category


class Command(BaseCommand):
    """
    Кастомная команда для заполнения базы данных тестовыми данными из фикстуры.
    """

    help = 'Загружает данные из фикстуры catalog/fixtures/data.json'

    def handle(self, *args, **options):
        self.stdout.write(self.style.WARNING('Очистка базы данных...'))

        # Предварительное удаление данных (Критерий 9)
        # Удаляем Продукты первыми из-за ForeignKey
        Product.objects.all().delete()
        Category.objects.all().delete()

        self.stdout.write(self.style.SUCCESS('База данных очищена.'))

        try:
            # Загрузка фикстуры (Критерий 9)
            self.stdout.write(self.style.WARNING('Загрузка данных из фикстуры...'))
            call_command('loaddata', 'catalog/fixtures/data.json')
            self.stdout.write(self.style.SUCCESS('Данные успешно загружены.'))

        except Exception as e:
            self.stdout.write(self.style.ERROR(f'Ошибка при загрузке данных: {e}'))
```

## catalog/management/__init__.py

```python

```

## myshop/wsgi.py

```python
"""
WSGI config for myshop project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myshop.settings')

application = get_wsgi_application()
```

## myshop/urls.py

```python
"""
URL configuration for myshop project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/5.2/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path, include
from django.conf import settings # 1. Импорт
from django.conf.urls.static import static # 2. Импорт
from catalog import views


urlpatterns = [
    path('', views.home, name='home'),
    path('admin/', admin.site.urls),
    path('', include('catalog.urls')),  # ✅ подключаем маршруты приложения
]
# 3. Добавляем раздачу медиа
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

## myshop/__init__.py

```python

```

## myshop/asgi.py

```python
"""
ASGI config for myshop project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myshop.settings')

application = get_asgi_application()
```

## README.md

```markdown
# Интернет-магазин на Django
Учебный проект для демонстрации основ Django и Bootstrap.
```

## django_templates_set.html

```html
<!-- catalog/templates/catalog/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MyShop{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

{% include 'catalog/includes/menu.html' %}

<div class="container mt-4 mb-5">
    {% block content %}{% endblock %}
</div>

<footer class="bg-light text-center py-3 mt-4">
    <p class="mb-0">© 2025 MyShop</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


<!-- catalog/templates/catalog/includes/menu.html -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home' %}">MyShop</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'home' %}">Главная</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'category' %}">Категории</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'contacts' %}">Контакты</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


<!-- catalog/templates/catalog/product_detail.html -->
{% extends 'catalog/base.html' %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="card mb-4 shadow-sm">
    <div class="row g-0">
        <div class="col-md-4">
            <img src="{{ product.image }}" class="img-fluid rounded-start" alt="{{ product.name }}">
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <h2 class="card-title">{{ product.name }}</h2>
                <p class="text-muted">Категория: {{ product.category }}</p>
                <h4 class="text-success mb-3">Цена: {{ product.price }} ₽</h4>
                <p class="card-text">{{ product.description }}</p>
                <a href="{% url 'home' %}" class="btn btn-secondary mt-3">Назад</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}


<!-- catalog/templates/catalog/product_form.html -->
{% extends 'catalog/base.html' %}

{% block title %}Создание товара{% endblock %}

{% block content %}
<h2 class="mb-4">Добавить новый товар</h2>
<form method="post" enctype="multipart/form-data" class="border p-4 rounded shadow-sm bg-light">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Создать</button>
    <a href="{% url 'home' %}" class="btn btn-secondary">Отменить</a>
</form>
{% endblock %}

<!-- catalog/templates/catalog/home.html -->
{% extends 'catalog/base.html' %}

{% block title %}Главная{% endblock %}

{% block content %}
<h2 class="mb-4">Все товары</h2>
<div class="row g-4">
    {% for product in page_obj %}
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <img src="{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
            <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                <p class="card-text">{{ product.description|truncatechars:100 }}</p>
                <p class="text-success fw-bold">{{ product.price }} ₽</p>
                <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">Подробнее</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<nav aria-label="Page navigation" class="mt-4">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Назад</a></li>
    {% endif %}

    <li class="page-item active"><span class="page-link">{{ page_obj.number }}</span></li>

    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Вперёд</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}


<!-- catalog/templates/catalog/category.html -->
{% extends 'catalog/base.html' %}

{% block title %}Категории{% endblock %}

{% block content %}
<h2 class="mb-4">Категории товаров</h2>
<div class="list-group">
    {% for category in categories %}
        <a class="list-group-item list-group-item-action" href="?category={{ category.pk }}">
            {{ category.name }}
        </a>
    {% endfor %}
</div>

{% if products %}
<h3 class="mt-4">Товары категории</h3>
<div class="row g-4 mt-2">
    {% for product in products %}
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <img src="{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
            <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                <p class="card-text">{{ product.description|truncatechars:100 }}</p>
                <p class="text-success fw-bold">{{ product.price }} ₽</p>
                <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary">Подробнее</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}


<!-- catalog/templates/catalog/contacts.html -->
{% extends 'catalog/base.html' %}

{% block title %}Контакты{% endblock %}

{% block content %}
<h2 class="mb-4">Контакты</h2>
<div class="card shadow-sm p-4">
    <p><strong>Email:</strong> support@myshop.ru</p>
    <p><strong>Телефон:</strong> +7 (900) 000-00-00</p>
    <p><strong>Адрес:</strong> г. Москва, ул. Примерная, 12</p>
</div>
{% endblock %}
```

## requirements.txt

```text
asgiref==3.10.0
Django==5.2.8
sqlparse==0.5.3
psycopg2-binary
python-dotenv
Pillow
ipython
```

## manage.py

```python
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myshop.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()
```

## .gitignore

```text
venv/
env/
__pycache__/
*.sqlite3
.idea/
*.pyc
*.log
*.DS_Store
```

## Statistics

- Total Files: 33
- Total Characters: 69790
- Total Tokens: 0
